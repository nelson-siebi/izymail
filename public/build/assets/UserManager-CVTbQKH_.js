import{r as l,a as i,j as e,H as f}from"./app-B82W_gjJ.js";import{A as j,S as w}from"./AppLayout-7foIsNkk.js";import{C as c}from"./Card-B0ZPSl5U.js";import{a as N,b as x,S as v}from"./Button-Bg4p-rfO.js";import"./Input-3eKUI4VR.js";import{T as y}from"./trash-2-9BlKcm5W.js";/* empty css            */import"./send-BLfDOY5k.js";import"./users-YSfvVqQE.js";import"./log-out-CiGKQAke.js";const k=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],S=N("pen-line",k);function I({users:s,plans:n,filters:d}){const[a,p]=l.useState(d.search||""),[h,o]=l.useState(!1),[r,m]=l.useState(null);l.useEffect(()=>{const t=setTimeout(()=>{a!==(d.search||"")&&i.get("/admin/users",{search:a},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},[a]);const u=t=>{i.post(`/admin/users/${r.id}/plan`,{plan_id:t},{onSuccess:()=>o(!1)})},b=t=>{confirm("Supprimer cet utilisateur ? Cette action est irrÃ©versible.")&&i.delete(`/admin/users/${t}`)};return e.jsxs(j,{title:"Gestion Utilisateurs",children:[e.jsx(f,{title:"Admin - Utilisateurs"}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(w,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Nom ou email...",value:a,onChange:t=>p(t.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl pl-12 pr-6 py-3.5 text-sm font-medium text-white focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/20 transition-all"})]})}),e.jsxs(c,{className:"p-0 overflow-hidden border border-slate-800 bg-slate-950/50 backdrop-blur-xl",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50 border-b border-slate-800",children:[e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Utilisateur"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-center",children:"Plan Actuel"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Inscrit le"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/50",children:s.data.map(t=>e.jsxs("tr",{className:"hover:bg-indigo-500/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-8 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-800/50 border border-slate-700/50 flex items-center justify-center font-bold text-indigo-400 text-sm",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-200 uppercase tracking-tight",children:t.name}),e.jsx("div",{className:"text-[10px] font-medium text-slate-500",children:t.email})]})]})}),e.jsx("td",{className:"px-8 py-5 text-center",children:e.jsx("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-indigo-500 text-[10px] font-bold uppercase tracking-widest",children:t.plans?.[0]?.name||"Aucun Plan"})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:new Date(t.created_at).toLocaleDateString()})}),e.jsx("td",{className:"px-8 py-5 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>{m(t),o(!0)},className:"p-2.5 bg-slate-900 border border-slate-800 rounded-lg text-slate-500 hover:text-indigo-400 hover:border-indigo-500/30 transition-all",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(t.id),className:"p-2.5 bg-slate-900 border border-slate-800 rounded-lg text-slate-500 hover:text-red-500 hover:border-red-500/30 transition-all",children:e.jsx(y,{className:"w-4 h-4"})})]})})]},t.id))})]})}),s.links.length>3&&e.jsx("div",{className:"p-6 bg-slate-900/30 border-t border-slate-800 flex justify-center gap-1.5",children:s.links.map((t,g)=>e.jsx("button",{onClick:()=>t.url&&i.get(t.url,{search:a},{preserveState:!0}),disabled:!t.url||t.active,className:x("min-w-[32px] h-[32px] flex items-center justify-center rounded-lg text-[10px] font-bold transition-all border",t.active?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-600/20":"bg-transparent border-slate-800 text-slate-500 hover:text-white hover:border-slate-700",!t.url&&"opacity-30 cursor-not-allowed border-transparent"),dangerouslySetInnerHTML:{__html:t.label}},g))})]})]}),h&&r&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/80 backdrop-blur-md",children:e.jsxs(c,{className:"w-full max-w-lg p-10 relative bg-slate-900 border border-slate-800 shadow-3xl",children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-8 right-8 p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-2xl font-bold text-white uppercase tracking-tight mb-2",children:"Assigner un Plan"}),e.jsx("p",{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mb-10",children:r.name}),e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsx("button",{onClick:()=>u(t.id),className:x("w-full p-6 border rounded-2xl text-left transition-all hover:translate-x-1",r.plans?.[0]?.id===t.id?"bg-indigo-600 border-indigo-400 shadow-xl shadow-indigo-600/20":"bg-slate-800/50 border-slate-700 hover:border-indigo-500/30"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-white uppercase tracking-tight text-xl",children:t.name}),e.jsxs("p",{className:"text-[10px] font-bold text-indigo-200 uppercase tracking-widest mt-1 opacity-70",children:[t.max_mails_per_day," mails / jour"]})]}),r.plans?.[0]?.id===t.id&&e.jsx(v,{className:"w-6 h-6 text-white"})]})},t.id))})]})})]})}const C=({className:s,onClick:n})=>e.jsxs("svg",{onClick:n,className:s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]});export{I as default};
