import{r as i,a as o,j as e,H as h}from"./app-B82W_gjJ.js";import{A as g,S as f}from"./AppLayout-7foIsNkk.js";import{C as b}from"./Card-B0ZPSl5U.js";import{a as j,b as v}from"./Button-Bg4p-rfO.js";import{D as w}from"./download-BpsyvVFd.js";import{C as d}from"./clock-sMC2Fp6W.js";import{C as N}from"./circle-x-CgQjazXL.js";import{C as y}from"./circle-check-CWic1i7J.js";/* empty css            */import"./send-BLfDOY5k.js";import"./users-YSfvVqQE.js";import"./log-out-CiGKQAke.js";const k=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C=j("triangle-alert",k);function B({logs:c,filters:r}){const[a,x]=i.useState(r.search||""),[l,p]=i.useState(r.status||"");i.useEffect(()=>{const t=setTimeout(()=>{a!==(r.search||"")&&o.get("/history",{search:a,status:l},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},[a]);const u=t=>{p(t),o.get("/history",{search:a,status:t},{preserveState:!0})},s=c,m=(t,n)=>{if(n)return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-yellow-500/10 text-yellow-500 text-[10px] font-bold uppercase tracking-widest",children:[e.jsx(d,{className:"w-3 h-3"})," Sandbox"]});switch(t){case"sent":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-green-500/10 text-green-500 text-[10px] font-bold uppercase tracking-widest",children:[e.jsx(y,{className:"w-3 h-3"})," Envoyé"]});case"failed":return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-red-500/10 text-red-500 text-[10px] font-bold uppercase tracking-widest",children:[e.jsx(N,{className:"w-3 h-3"})," Échec"]});default:return e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-500/10 text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:[e.jsx(d,{className:"w-3 h-3"})," En attente"]})}};return e.jsxs(g,{title:"Historique des Envois",children:[e.jsx(h,{title:"Historique"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{className:"relative w-full md:w-96 group",children:[e.jsx(f,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500 group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{type:"text",placeholder:"Chercher un destinataire...",value:a,onChange:t=>x(t.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-2xl pl-12 pr-6 py-3.5 text-sm font-medium text-white focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/20 transition-all"})]}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsxs("select",{value:l,onChange:t=>u(t.target.value),className:"flex-1 md:flex-none bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-sm font-medium text-slate-300 hover:text-white transition-all focus:outline-none focus:border-indigo-500/50 appearance-none cursor-pointer pr-12 relative",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 1.5rem center",backgroundSize:"1rem"},children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"sent",children:"Envoyés"}),e.jsx("option",{value:"failed",children:"Échecs"}),e.jsx("option",{value:"pending",children:"En attente"})]}),e.jsxs("button",{className:"flex-1 md:flex-none flex items-center justify-center gap-2 px-6 py-3.5 bg-indigo-600/10 border border-indigo-500/20 rounded-2xl text-xs font-bold text-indigo-400 uppercase tracking-widest hover:bg-indigo-600/20 transition-all",children:[e.jsx(w,{className:"w-4 h-4"})," Export CSV"]})]})]}),e.jsxs(b,{className:"p-0 overflow-hidden border border-slate-800 bg-slate-950/50 backdrop-blur-xl",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-slate-900/50 border-b border-slate-800",children:[e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Destinataire"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Sujet"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest text-center",children:"Statut"}),e.jsx("th",{className:"px-8 py-5 text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800/50",children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-8 py-20 text-center font-medium text-slate-600 uppercase tracking-[0.2em] text-[10px]",children:"Aucun log trouvé"})}):s.data.map(t=>e.jsxs("tr",{className:"hover:bg-indigo-500/[0.02] transition-colors group",children:[e.jsx("td",{className:"px-8 py-5",children:e.jsx("div",{className:"font-bold text-slate-200 truncate max-w-[200px]",children:t.to_email})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("div",{className:"text-sm font-medium text-slate-500 truncate max-w-[250px]",children:t.subject})}),e.jsx("td",{className:"px-8 py-5 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[m(t.status,t.sandbox),t.status==="failed"&&e.jsx("div",{className:"mt-1.5 text-[8px] font-bold text-red-500/70 uppercase tracking-widest",children:t.error})]})}),e.jsx("td",{className:"px-8 py-5",children:e.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-[0.1em]",children:new Date(t.created_at).toLocaleString()})})]},t.id))})]})}),s.links.length>3&&e.jsxs("div",{className:"p-6 bg-slate-900/30 border-t border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-widest",children:["Affichage de ",s.from,"-",s.to," sur ",s.total]}),e.jsx("div",{className:"flex items-center gap-1.5",children:s.links.map((t,n)=>e.jsx("button",{onClick:()=>t.url&&o.get(t.url,{search:a,status:l},{preserveState:!0}),disabled:!t.url||t.active,className:v("min-w-[32px] h-[32px] flex items-center justify-center rounded-lg text-[10px] font-bold transition-all border",t.active?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-600/20":"bg-transparent border-slate-800 text-slate-500 hover:text-white hover:border-slate-700",!t.url&&"opacity-30 cursor-not-allowed border-transparent"),dangerouslySetInnerHTML:{__html:t.label}},n))})]})]}),e.jsxs("div",{className:"flex items-center gap-6 p-8 bg-indigo-500/5 border border-dashed border-indigo-500/20 rounded-3xl",children:[e.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl text-indigo-500",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsxs("p",{className:"text-[11px] font-medium text-slate-500 leading-relaxed uppercase tracking-wider",children:["Les journaux sont conservés pendant ",e.jsx("span",{className:"text-slate-200",children:"30 jours"})," glissants selon votre plan. Exportez vos données mensuellement pour vos rapports."]})]})]})]})}export{B as default};
