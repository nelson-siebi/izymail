import{b as k,r,R as C,u as y,j as e,H as A,L as T}from"./app-B82W_gjJ.js";import{A as I,K as l}from"./AppLayout-7foIsNkk.js";import{C as a}from"./Card-B0ZPSl5U.js";import{a as _,B as t,b as P}from"./Button-Bg4p-rfO.js";import{I as S}from"./Input-3eKUI4VR.js";import{P as L}from"./plus-CNfCDwCk.js";import{T as R}from"./trash-2-9BlKcm5W.js";import{C as z}from"./circle-check-CWic1i7J.js";import{C as D}from"./copy-BCMyS6iq.js";import{C as E}from"./circle-alert-DDOfK0mY.js";/* empty css            */import"./send-BLfDOY5k.js";import"./users-YSfvVqQE.js";import"./log-out-CiGKQAke.js";const M=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],q=_("shield-alert",M);function se({tokens:d}){const{flash:i}=k().props,[F,G]=r.useState(null),[h,o]=r.useState(!1),[n,c]=r.useState(null),[x,m]=r.useState(!1);C.useEffect(()=>{i.newToken&&(c(i.newToken),o(!0))},[i.newToken]);const{data:u,setData:b,post:g,delete:j,processing:p,reset:f}=y({name:""}),v=s=>{navigator.clipboard.writeText(s),m(!0),setTimeout(()=>m(!1),2e3)},N=s=>{s.preventDefault(),g("/api-keys",{onSuccess:()=>f()})},w=s=>{confirm("Êtes-vous sûr de vouloir révoquer cette clé ?")&&j(`/api-keys/${s}`)};return e.jsxs(I,{title:"Clés API",children:[e.jsx(A,{title:"Clés API"}),e.jsxs("div",{className:"max-w-5xl space-y-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mb-2",children:"Intégration"}),e.jsx("h2",{className:"text-2xl font-bold text-white uppercase tracking-tight whitespace-pre-wrap",children:"Authentification API"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(a,{className:"p-8 lg:col-span-1 bg-slate-900/50 backdrop-blur-xl border border-indigo-500/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-white uppercase tracking-tight mb-6 flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-indigo-500"})," Nouvelle Clé"]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsx(S,{label:"Nom de la clé",placeholder:"ex: Application Mobile",value:u.name,onChange:s=>b("name",s.target.value),required:!0}),e.jsx(t,{type:"submit",className:"w-full",disabled:p,children:p?"Génération...":"GÉNÉRER"})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:d.length===0?e.jsxs(a,{className:"p-12 text-center bg-slate-900/50 backdrop-blur-xl border border-dashed border-slate-800",children:[e.jsx(l,{className:"w-10 h-10 text-slate-700 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-500 font-bold uppercase tracking-[0.2em] text-[10px]",children:"Aucune clé active"})]}):d.map(s=>e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-slate-800/50 border border-slate-700/50 rounded-xl",children:e.jsx(l,{className:"w-4 h-4 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-base font-bold text-white uppercase tracking-tight leading-none mb-1",children:s.name}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-[0.15em]",children:["Créée le ",new Date(s.created_at).toLocaleDateString()," • Dernier usage: ",s.last_used_at?new Date(s.last_used_at).toLocaleDateString():"Jamais"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(t,{variant:"outline",size:"sm",onClick:()=>w(s.id),className:"text-red-500 border-red-500/20 hover:bg-red-500/10",children:e.jsx(R,{className:"w-4 h-4"})})})]})},s.id))})]}),e.jsx(a,{className:"p-10 bg-red-500/5 border border-dashed border-red-500/20 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl text-red-500",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-white uppercase tracking-tight mb-2",children:"Sécurité Recommandée"}),e.jsxs("p",{className:"text-slate-400 font-medium text-sm leading-relaxed mb-6",children:["Les clés API donnent un accès total à l'envoi de mails via votre compte.",e.jsx("span",{className:"text-white",children:" Toute clé générée n'est affichée qu'une seule fois."}),"Assurez-vous de la sauvegarder dans un endroit sûr."]}),e.jsx(T,{href:"/docs",children:e.jsx(t,{variant:"ghost",className:"text-[10px] font-bold uppercase tracking-[0.2em] p-0 h-auto hover:bg-transparent",children:"Lire la documentation →"})})]})]})})]}),h&&n&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/80 backdrop-blur-md",children:e.jsxs(a,{className:"w-full max-w-xl p-0 relative bg-slate-900 border-2 border-indigo-500 shadow-[0_0_50px_-12px_rgba(99,102,241,0.3)] overflow-hidden",children:[e.jsxs("div",{className:"p-8 bg-indigo-600 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(l,{className:"w-32 h-32"})}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-6 backdrop-blur-lg",children:e.jsx(l,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white uppercase tracking-tight mb-2",children:"Clé API Générée"}),e.jsx("p",{className:"text-indigo-100 font-medium text-sm",children:"Cette clé ne sera affichée qu'une seule fois."})]})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3 block",children:"Votre Token Privé"}),e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"bg-slate-950 border border-slate-800 rounded-xl p-4 font-mono text-sm text-indigo-400 break-all leading-relaxed shadow-inner",children:n}),e.jsx("div",{className:"absolute inset-0 bg-slate-900/0 group-hover:bg-slate-900/5 transition-colors pointer-events-none rounded-xl"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(t,{size:"xl",className:P("flex-1 transition-all duration-300",x?"bg-green-500 hover:bg-green-600":"bg-indigo-600 hover:bg-indigo-700"),onClick:()=>v(n),children:x?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 mr-2"})," COPIÉ !"]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-5 h-5 mr-2"})," COPIER LA CLÉ"]})}),e.jsx(t,{variant:"outline",size:"xl",onClick:()=>{o(!1),c(null)},children:"FERMER"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:[e.jsx(E,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-amber-500/80 leading-relaxed font-medium",children:"Assurez-vous de stocker cette clé dans un endroit sûr. Pour des raisons de sécurité, nous ne pourrons plus jamais vous l'afficher."})]})]})]})})]})}export{se as default};
