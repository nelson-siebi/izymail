import{r as c,u as y,j as e,H as S,a as p}from"./app-B82W_gjJ.js";import{A as k}from"./AppLayout-7foIsNkk.js";import{C as m}from"./Card-B0ZPSl5U.js";import{B as o,b as E,X as C}from"./Button-Bg4p-rfO.js";import{I as r}from"./Input-3eKUI4VR.js";import{P as R}from"./plus-CNfCDwCk.js";import{S as T}from"./server-w88pJJ0h.js";import{T as P}from"./trash-2-9BlKcm5W.js";/* empty css            */import"./send-BLfDOY5k.js";import"./users-YSfvVqQE.js";import"./log-out-CiGKQAke.js";function $({servers:u}){const[x,i]=c.useState(!1),[l,d]=c.useState(null),{data:a,setData:s,post:h,patch:g,processing:b,errors:M,reset:f}=y({host:"",port:587,username:"",password:"",encryption:"tls",priority:1,max_per_hour:1e3}),j=t=>{d(t),s({host:t.host,port:t.port,username:t.username,password:"",encryption:t.encryption,priority:t.priority,max_per_hour:t.max_per_hour}),i(!0)},n=()=>{i(!1),d(null),f()},w=t=>{p.patch(`/admin/smtp/${t}/toggle`)},v=t=>{confirm("Supprimer ce serveur SMTP ?")&&p.delete(`/admin/smtp/${t}`)},N=t=>{t.preventDefault(),l?g(`/admin/smtp/${l.id}`,{onSuccess:()=>n()}):h("/admin/smtp",{onSuccess:()=>n()})};return e.jsxs(k,{title:"Gestion SMTP",children:[e.jsx(S,{title:"Admin - SMTP"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 font-bold text-[10px] uppercase tracking-[0.2em] mb-2",children:"Configuration"}),e.jsx("h2",{className:"text-2xl font-bold text-white uppercase tracking-tight",children:"Serveurs SMTP"})]}),e.jsxs(o,{onClick:()=>i(!0),className:"px-8",children:[e.jsx(R,{className:"mr-2 w-4 h-4"})," AJOUTER UN SERVEUR"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map(t=>e.jsxs(m,{className:"relative group hover:border-indigo-500/30 transition-all bg-slate-950/50 backdrop-blur-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("div",{className:"p-3 bg-slate-800/50 border border-slate-700/50 rounded-xl",children:e.jsx(T,{className:"w-5 h-5 text-indigo-500"})}),e.jsx("button",{onClick:()=>w(t.id),className:E("px-4 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-widest cursor-pointer hover:scale-105 transition-all border",t.active?"bg-green-500/10 text-green-500 border-green-500/20":"bg-red-500/10 text-red-500 border-red-500/20"),children:t.active?"Actif":"Inactif"})]}),e.jsxs("div",{className:"space-y-4 mb-10",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-white uppercase tracking-tight truncate border-l-2 border-indigo-500 px-2",children:t.host}),e.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-2 ml-1",children:["PORT: ",t.port," | ",t.encryption?.toUpperCase()]})]}),e.jsxs("div",{className:"p-5 bg-slate-900/30 border border-slate-800/50 rounded-2xl",children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5",children:"Username"}),e.jsx("p",{className:"text-sm font-medium text-slate-300 truncate",children:t.username})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(o,{variant:"secondary",className:"w-full",onClick:()=>j(t),children:"EDITER"}),e.jsx(o,{variant:"danger",className:"w-full",onClick:()=>v(t.id),children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-all scale-95 group-hover:scale-100",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-600/90 backdrop-blur-sm text-white text-[8px] font-bold uppercase tracking-widest rounded-full shadow-lg shadow-black/20",children:["PRIORITY: ",t.priority]})})]},t.id))})]}),x&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-950/80 backdrop-blur-md",children:e.jsxs(m,{className:"w-full max-w-2xl p-10 relative bg-slate-900 border border-slate-800 shadow-3xl",children:[e.jsx("button",{onClick:n,className:"absolute top-8 right-8 p-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-all",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-2xl font-bold text-white uppercase tracking-tight mb-10",children:l?"Modifier le Serveur":"Nouveau Serveur SMTP"}),e.jsxs("form",{onSubmit:N,className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx(r,{label:"Host",placeholder:"smtp.mailtrap.io",value:a.host,onChange:t=>s("host",t.target.value),required:!0}),e.jsx(r,{label:"Port",type:"number",placeholder:"587",value:a.port,onChange:t=>s("port",t.target.value),required:!0}),e.jsx(r,{label:"Username",placeholder:"api_key",value:a.username,onChange:t=>s("username",t.target.value),required:!0}),e.jsx(r,{label:"Password",type:"password",placeholder:"••••••••",value:a.password,onChange:t=>s("password",t.target.value)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-1",children:"Encryption"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-800 rounded-2xl px-6 py-3.5 text-white font-medium text-sm focus:outline-none focus:border-indigo-500/50 transition-all appearance-none",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 1.5rem center",backgroundSize:"1rem"},value:a.encryption,onChange:t=>s("encryption",t.target.value),children:[e.jsx("option",{value:"tls",children:"TLS"}),e.jsx("option",{value:"ssl",children:"SSL"}),e.jsx("option",{value:"none",children:"None"})]})]}),e.jsx(r,{label:"Priorité",type:"number",placeholder:"1",value:a.priority,onChange:t=>s("priority",t.target.value),required:!0})]}),e.jsx(o,{type:"submit",size:"xl",className:"w-full uppercase tracking-widest text-xs font-bold",disabled:b,children:l?"METTRE À JOUR LE SERVEUR":"ENREGISTRER LE SERVEUR"})]})]})})]})}export{$ as default};
